language: csharp
solution: CpuFeaturesDotNet.sln

mono: none 

before_install:
  - sudo apt-get install -y dotnet-sdk-5.0
  - sudo apt-get update
  - sudo apt install nuget

install:
  - nuget restore CpuFeaturesDotNet.sln
  - nuget install xunit.runners -OutputDirectory testrunner

matrix:
  # Toolchains for little-endian, hard-float, 32-bit ARMv7 (and earlier) for GNU/Linux systems
  - os: linux
    env:
      TOOLCHAIN=LINARO
      TARGET=arm-linux-gnueabihf
      QEMU_ARCH=arm
  # Toolchains for little-endian, 32-bit ARMv8 for GNU/Linux systems
  - os: linux
    env:
      TOOLCHAIN=LINARO
      TARGET=armv8l-linux-gnueabihf
      QEMU_ARCH=arm
  # Toolchains for little-endian, soft-float, 32-bit ARMv7 (and earlier) for GNU/Linux systems
  - os: linux
    env:
      TOOLCHAIN=LINARO
      TARGET=arm-linux-gnueabi
      QEMU_ARCH=arm
      
script:
  - dotnet --version
  - dotnet build "src/CpuFeaturesDotNet" -c Release --force
  - dotnet test "tests" -c Release
